PART
{
    // --- general parameters ---
    name = B9_Engine_Jet_Turbofan_F119
    module = Part
    author = bac9

    // --- asset parameters ---
    mesh = model.mu
    scale = 1.0
    rescaleFactor = 1

    // --- node definitions ---
    node_stack_top = 0.0, 0.5, 0.0, 0.0, 1.0, 0.0

    // --- editor parameters ---
    TechRequired = aerospaceTech
    entryCost = 7500
    cost = 2500
    category = Propulsion
    subcategory = 0
    title = F119 Turbofan Engine
    manufacturer = Tetragon Projects
    description = State-of-art  afterburning low-bypass turbofan engine capable of sustained supercruise speeds. Fitted with latest in thrust vectoring technology, this engine provides extreme pitch authority, and, if multiple engines are present, outstanding roll authority. Obvious choice whenever superior maneuverability is desired. Max Design Speed: Mach 2.5.

    // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
    attachRules = 1,0,1,0,0

    // --- standard part parameters ---
    mass = 1.03
    dragModelType = default
    maximum_drag = 0.2
    minimum_drag = 0.2
    angularDrag = 2
    crashTolerance = 7
    breakingForce = 75
    breakingTorque = 75
    maxTemp = 2000 // = 3600
	emissiveConstant = 0.8
	bulkheadProfiles = size1

    EFFECTS
    {
        power
        {
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = b9_jet_f119_flame
                modelName = B9_Aerospace/FX/HR/flamejet3
                transformName = thrust_transform
                localPosition = 0, 0, -0.5
                fixedScale = 0.67
                emission = 0.66 0
                emission = 0.67 2.42 1.35 1.35
                emission = 1.0 2.5 0 0
                speed = 0.66 3.75
                speed = 1.0 4.575
                energy = 0.66 0.5
                energy = 1 1
                // under/over expansion
                logGrow
                {
                    density = 1 -0.9
                    density = 0.4 1
                    density = 0.05 5
                    density = 0.005 40
                }
                linGrow
                {
                    density = 0.05 0 0 0
                    density = 0.005 3
                    density = 0 30
                }
                size
                {
                    power = 0.66 1.8
                    power = 0.7 1.85
                    power = 1 1.9
                    density = 0.4 1
                    density = 0.05 0.87
                    density = 0.03 0.55
                    density = 0.02 0.45
                    density = 0.005 0.4
                    density = 0 0.25 0 0
                }
            }

            AUDIO
            {
                name = b9_jet_f119_sound_afterburner
                channel = Ship
                clip = sound_rocket_hard
                volume = 0.66 0
                volume = 0.67 1 3 3
                volume = 1 1.33 0 0
                pitch = 0.66 1
                pitch = 1 0.66
                loop = true
            }

            AUDIO
            {
                name = b9_jet_f119_sound_jet_deep
                channel = Ship
                clip = sound_jet_deep
                volume = 0   0    0     25
                volume = 0.1 1.12 0.145 0.145
                volume = 1.0 1.25 0.145 0
                pitch = 0 0.3
                pitch = 1 1
                loop = true
            }
        }
        running
        {
            MODEL_MULTI_PARTICLE_PERSIST
            {
                name = b9_jet_f119_smoke
                modelName = B9_Aerospace/FX/HR/smokejet
                transformName = thrust_transform
                speed = 0.0 0.8
                speed = 1.0 1
                size = 0.75

                emission
                {
                    power = 0.07 0 0 0
                    power = 0.2 0.4 2.91 2.91
                    power = 1.0 1.1 0 0
                    density = 0.001 0 0 0
                    density = 0.002 1 0 0
                }

                energy
                {
                    power = 0 0.2
                    power = 1 3.2
                    externaltemp = -10 1
                    externaltemp = 1 0
                    mach = 0 1
                    mach = 10 10
                }

                offset
                {
                    mach = 0 1
                    mach = 6 10
                }

                logGrow
                {
                    density = 0 2
                    density = 1 0.9
                    density = 10 0
                }
            }

            AUDIO
            {
                channel = Ship
                clip = sound_jet_low
                volume = 0   0    0    25
                volume = 0.1 1.12 0.22 0.22
                volume = 1   1.32 0.22 0
                pitch = 0 0.3
                pitch = 1 1
                loop = true
            }
        }
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_medium
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = thrust_transform
                oneShot = true
                localOffset = 0, 0, 2.2
            }

            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
    }

    MODULE
    {
        name = ModuleEnginesFX
        engineID = Jet
        thrustVectorTransformName = thrust_transform
        exhaustDamage = False
        ignitionThreshold = 0.1
        minThrust = 0
        maxThrust = 160
        heatProduction = 600
        useEngineResponseTime = True
        engineAccelerationSpeed = 0.25
        engineDecelerationSpeed = 0.45
        useVelocityCurve = False
        EngineType = Turbine
        PROPELLANT
        {
            name = LiquidFuel
            ratio = 1
            DrawGauge = True
        }
        PROPELLANT
        {
            name = IntakeAir
            ignoreForIsp = True
			ratio = 30
        }
        atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		machLimit = 2.5
		machHeatMult = 5.0
		atmosphereCurve
        {
            key = 0 10000 0 0   
        }
        velCurve
		{
			key = 0 1 0 0
			key = 0.2 0.98 0 0
			key = 0.72 1.716 2.433527 2.433527
			key = 1.36 3.2 1.986082 1.986082
			key = 2.15 4.9 1.452677 1.452677
			key = 3 5.8 0.0005786046 0.0005786046
			key = 4.5 3 -4.279616 -4.279616
			key = 5.5 0 -0.02420209 0
		}
		atmCurve
		{
			key = 0 0 0 0
			key = 0.045 0.166 4.304647 4.304647
			key = 0.16 0.5 0.5779132 0.5779132
			key = 0.5 0.6 0.4809403 0.4809403
			key = 1 1 1.013946 0
		}
    }

    MODULE
    {
        name = FSanimateThrottle
        animationName = jet_engine_f119_throttle
        responseSpeed = 0.0025
        animationLayer = 2
    }

    MODULE
    {
        name = ModuleAnimateHeat
        ThermalAnim = jet_engine_f119_heat
    }

    MODULE
    {
        name = ModuleAlternator
        RESOURCE
        {
            name = ElectricCharge
            rate = 5.0
        }
    }

    MODULE
    {
        name = KM_Gimbal_3
        gimbalTransformName = thrust_transform
        pitchGimbalRange = 20
        yawGimbalRange = 0
        enableRoll = true
        enableSmoothGimbal = true
        responseSpeed = 60
    }

    RESOURCE
    {
        name = ElectricCharge
        amount = 0
        maxAmount = 0
        isTweakable = false
        hideFlow = true
    }

    MODULE
    {
        name = FXModuleConstrainPosition
        matchRotation = true
        matchPosition = false
        CONSTRAINFX
        {
            targetName = lookatfx_target1
            moversName = plate1_holder
        }

        CONSTRAINFX
        {
            targetName = lookatfx_target2
            moversName = plate2_holder
        }
    }

    MODULE
    {
        name = ModuleTestSubject

        // nowhere: 0, srf: 1, ocean: 2, atmo: 4, space: 8
        environments = 7

        useStaging = True
        useEvent = True
    }
}

//@PART[B9_Engine_Jet_Turbofan_F119]:NEEDS[FerramAerospaceResearch|NEAR]:Final {
//    @MODULE[ModuleEnginesFX] {
//        @maxThrust *= 1.25
//    }
//}
